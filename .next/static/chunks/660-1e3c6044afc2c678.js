"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{1704:function(e,t,r){r.d(t,{A:function(){return C}});var a=r(7437),s=r(3765),n=r(2022),l=r(9733),i=r(2265),o=r(4042),c=r(2023),d=r(3402),u=r(897),f=r(4258),m=r(4697),h=r(9896),x=r(6463);let v=[{icon:n.Z,label:"Profile",path:"/profile"},{icon:o.Z,label:"Notifications",path:"/notifications"},{icon:c.Z,label:"Journal",path:"/journal"},{icon:d.Z,label:"Library",path:"/library"},{icon:u.Z,label:"Saved Posts",path:"/saved"},{icon:c.Z,label:"Log Practice",path:"/log-practice"},{icon:f.Z,label:"Settings",path:"/settings"}],g=e=>{let{isOpen:t,onClose:r}=e,s=(0,x.useRouter)();if(!t)return null;let i=e=>{s.push(e),r()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 animate-in fade-in",onClick:r}),(0,a.jsx)("div",{className:"fixed right-0 top-0 bottom-0 w-full max-w-sm bg-card z-50 shadow-2xl animate-in slide-in-from-right",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-border",children:[(0,a.jsx)(l.z,{variant:"ghost",size:"icon",className:"absolute right-4 top-4",onClick:r,children:(0,a.jsx)(m.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center mt-8",children:[(0,a.jsx)("div",{className:"h-24 w-24 rounded-full bg-muted flex items-center justify-center mb-4",children:(0,a.jsx)(n.Z,{className:"h-12 w-12"})}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Emma Smith"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"@emmasmith"})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,a.jsx)("div",{className:"space-y-1",children:v.map(e=>(0,a.jsxs)("button",{onClick:()=>i(e.path),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-secondary transition-colors text-left",children:[(0,a.jsx)(e.icon,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:e.label})]},e.path))})}),(0,a.jsx)("div",{className:"p-4 border-t border-border",children:(0,a.jsxs)(l.z,{variant:"ghost",className:"w-full justify-start gap-3 text-destructive hover:text-destructive",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Log Out"})]})})]})})]})},p=e=>{let{streak:t=0,showBranding:r=!0}=e,[o,c]=(0,i.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"fixed top-0 left-0 right-0 bg-background border-b border-border z-40 px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex-1"}),r&&(0,a.jsx)("h1",{className:"absolute left-1/2 -translate-x-1/2 text-xl font-bold tracking-tight",style:{fontFamily:"Times New Roman, serif"},children:"PRONIA"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-secondary px-3 py-1.5 rounded-full",children:[(0,a.jsx)("span",{className:"text-sm font-semibold",children:t}),(0,a.jsx)(s.Z,{className:"h-4 w-4 text-[#ff6b35]"})]}),(0,a.jsx)(l.z,{variant:"ghost",size:"icon",className:"rounded-full h-9 w-9",onClick:()=>c(!0),children:(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"h-5 w-5"})})})]})]})}),(0,a.jsx)(g,{isOpen:o,onClose:()=>c(!1)})]})};var b=r(3852),j=r(7986),N=r(472),w=r(7140),y=r(7138),_=r(9354);let k=e=>{let{to:t,children:r,className:s,activeClassName:n}=e,l=(0,x.usePathname)();return(0,a.jsx)(y.default,{href:t,className:(0,_.cn)(s,l===t&&n),children:r})},Z=[{icon:b.Z,label:"Home",path:"/feed"},{icon:j.Z,label:"Library",path:"/library"},{icon:N.Z,label:"Record",path:"/record"},{icon:w.Z,label:"Dashboard",path:"/dashboard"},{icon:n.Z,label:"Profile",path:"/profile"}],z=()=>(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50",children:(0,a.jsx)("div",{className:"flex items-center justify-around h-16 px-2",children:Z.map(e=>(0,a.jsxs)(k,{to:e.path,className:"flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors text-muted-foreground",activeClassName:"text-foreground bg-secondary",children:[(0,a.jsx)(e.icon,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.path))})}),C=e=>{let{children:t,streak:r,showBranding:s=!0}=e;return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(p,{streak:r,showBranding:s}),(0,a.jsx)("main",{className:"pt-16 pb-20",children:t}),(0,a.jsx)(z,{})]})}},7992:function(e,t,r){r.d(t,{X:function(){return c},bZ:function(){return o}});var a=r(7437),s=r(2265),n=r(3027),l=r(9354);let i=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:s}),r),...n})});o.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",r),...s})});c.displayName="AlertDescription"},9733:function(e,t,r){r.d(t,{z:function(){return c}});var a=r(7437),s=r(2265),n=r(1538),l=r(3027),i=r(9354);let o=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:r})),ref:t,...d})});c.displayName="Button"},9630:function(e,t,r){r.d(t,{H:function(){return o},a:function(){return c}});var a=r(7437),s=r(2265),n=r(4392),l=r(6463);let i=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,r=(0,n.createClientComponentClient)(),o=(0,l.useRouter)(),[c,d]=(0,s.useState)(null),[u,f]=(0,s.useState)(null),[m,h]=(0,s.useState)(null),[x,v]=(0,s.useState)(!0),g=async e=>{let{data:t,error:a}=await r.from("profiles").select("*").eq("id",e).single();return a&&"PGRST116"!==a.code?(console.error("Error fetching profile:",a),null):t},p=async e=>{var t,a,s,n;let l=(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"user_".concat(e.id.slice(0,8)),i=(null===(a=e.user_metadata)||void 0===a?void 0:a.full_name)||(null===(s=e.user_metadata)||void 0===s?void 0:s.name)||l,o={id:e.id,email:e.email||"",name:i,username:l,bio:"",avatar_url:(null===(n=e.user_metadata)||void 0===n?void 0:n.avatar_url)||null,instruments:[],experience_level:"",followers_count:0,following_count:0,is_premium:!1,trial_start_date:null},{data:c,error:d}=await r.from("profiles").upsert(o).select().single();return d?(console.error("Error creating profile:",d),null):c};(0,s.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await r.auth.getSession();if(null==e?void 0:e.user){h(e),d(e.user);let t=await g(e.user.id);t||(t=await p(e.user)),f(t)}}catch(e){console.error("Auth initialization error:",e)}finally{v(!1)}})();let{data:{subscription:e}}=r.auth.onAuthStateChange(async(e,t)=>{if(h(t),d((null==t?void 0:t.user)||null),null==t?void 0:t.user){var r;let a=await g(t.user.id);a||(a=await p(t.user)),f(a),"SIGNED_IN"!==e||(null==a?void 0:null===(r=a.instruments)||void 0===r?void 0:r.length)||o.push("/onboarding")}else f(null)});return()=>{e.unsubscribe()}},[r,o]);let b=async()=>{let{error:e}=await r.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw console.error("Google sign in error:",e),e},j=async()=>{await r.auth.signOut(),d(null),f(null),h(null),o.push("/")},N=async e=>{if(!c)return;let{error:t}=await r.from("profiles").update(e).eq("id",c.id);if(t)throw console.error("Error updating profile:",t),t;await w()},w=async()=>{c&&f(await g(c.id))};return(0,a.jsx)(i.Provider,{value:{user:c,profile:u,session:m,isLoading:x,signInWithGoogle:b,signOut:j,updateProfile:N,refreshProfile:w},children:t})},c=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9354:function(e,t,r){r.d(t,{cn:function(){return n}});var a=r(4839),s=r(6164);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}}]);