(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{8536:function(e,t,r){Promise.resolve().then(r.bind(r,1193))},1193:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(7437),i=r(9733),l=r(8185),o=r(9630),a=r(6463),s=r(2265);function u(){let{user:e,isLoading:t,signInWithGoogle:r}=(0,o.a)(),u=(0,a.useRouter)();return(0,s.useEffect)(()=>{e&&!t&&u.push("/feed")},[e,t,u]),(0,n.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"max-w-md w-full",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-center mb-2",style:{fontFamily:"Times New Roman, serif"},children:"PRONIA"}),(0,n.jsx)("p",{className:"text-center text-muted-foreground mb-8",children:"Track your music practice journey"}),(0,n.jsxs)(l.Zb,{className:"p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-center mb-6",children:"Welcome Back"}),(0,n.jsxs)(i.z,{onClick:r,variant:"outline",className:"w-full h-12 text-base font-medium gap-3",children:[(0,n.jsxs)("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,n.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,n.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,n.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,n.jsx)("p",{className:"text-xs text-center text-muted-foreground mt-6",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})]})})}},9733:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(7437),i=r(2265),l=r(1538),o=r(3027),a=r(9354);let s=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef((e,t)=>{let{className:r,variant:i,size:o,asChild:u=!1,...c}=e,d=u?l.g7:"button";return(0,n.jsx)(d,{className:(0,a.cn)(s({variant:i,size:o,className:r})),ref:t,...c})});u.displayName="Button"},8185:function(e,t,r){"use strict";r.d(t,{Zb:function(){return o}});var n=r(7437),i=r(2265),l=r(9354);let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...i})});o.displayName="Card",i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...i})}).displayName="CardHeader",i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...i})}).displayName="CardTitle",i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...i})}).displayName="CardDescription",i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...i})}).displayName="CardContent",i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...i})}).displayName="CardFooter"},9630:function(e,t,r){"use strict";r.d(t,{H:function(){return s},a:function(){return u}});var n=r(7437),i=r(2265),l=r(4392),o=r(6463);let a=(0,i.createContext)(void 0),s=e=>{let{children:t}=e,r=(0,l.createClientComponentClient)(),s=(0,o.useRouter)(),[u,c]=(0,i.useState)(null),[d,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(null),[h,v]=(0,i.useState)(!0),g=async e=>{let{data:t,error:n}=await r.from("profiles").select("*").eq("id",e).single();return n&&"PGRST116"!==n.code?(console.error("Error fetching profile:",n),null):t},y=async e=>{var t,n,i,l;let o=(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"user_".concat(e.id.slice(0,8)),a=(null===(n=e.user_metadata)||void 0===n?void 0:n.full_name)||(null===(i=e.user_metadata)||void 0===i?void 0:i.name)||o,s={id:e.id,email:e.email||"",name:a,username:o,bio:"",avatar_url:(null===(l=e.user_metadata)||void 0===l?void 0:l.avatar_url)||null,instruments:[],experience_level:"",followers_count:0,following_count:0,is_premium:!1,trial_start_date:null},{data:u,error:c}=await r.from("profiles").upsert(s).select().single();return c?(console.error("Error creating profile:",c),null):u};(0,i.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await r.auth.getSession();if(null==e?void 0:e.user){m(e),c(e.user);let t=await g(e.user.id);t||(t=await y(e.user)),f(t)}}catch(e){console.error("Auth initialization error:",e)}finally{v(!1)}})();let{data:{subscription:e}}=r.auth.onAuthStateChange(async(e,t)=>{if(m(t),c((null==t?void 0:t.user)||null),null==t?void 0:t.user){var r;let n=await g(t.user.id);n||(n=await y(t.user)),f(n),"SIGNED_IN"!==e||(null==n?void 0:null===(r=n.instruments)||void 0===r?void 0:r.length)||s.push("/onboarding")}else f(null)});return()=>{e.unsubscribe()}},[r,s]);let x=async()=>{let{error:e}=await r.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw console.error("Google sign in error:",e),e},b=async()=>{await r.auth.signOut(),c(null),f(null),m(null),s.push("/")},w=async e=>{if(!u)return;let{error:t}=await r.from("profiles").update(e).eq("id",u.id);if(t)throw console.error("Error updating profile:",t),t;await N()},N=async()=>{u&&f(await g(u.id))};return(0,n.jsx)(a.Provider,{value:{user:u,profile:d,session:p,isLoading:h,signInWithGoogle:x,signOut:b,updateProfile:w,refreshProfile:N},children:t})},u=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9354:function(e,t,r){"use strict";r.d(t,{cn:function(){return l}});var n=r(4839),i=r(6164);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,n.W)(t))}},1538:function(e,t,r){"use strict";r.d(t,{Z8:function(){return c},g7:function(){return d}});var n,i=r(2265),l=r(1584),o=r(7437),a=Symbol.for("react.lazy"),s=(n||(n=r.t(i,2)))[" use ".trim().toString()];function u(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===a&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function c(e){let t=function(e){let t=i.forwardRef((e,t)=>{let{children:r,...n}=e;if(u(r)&&"function"==typeof s&&(r=s(r._payload)),i.isValidElement(r)){var o;let e,a;let s=(o=r,(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?o.props.ref:o.props.ref||o.ref),u=function(e,t){let r={...t};for(let n in t){let i=e[n],l=t[n];/^on[A-Z]/.test(n)?i&&l?r[n]=(...e)=>{let t=l(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...l}:"className"===n&&(r[n]=[i,l].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==i.Fragment&&(u.ref=t?(0,l.F)(t,s):s),i.cloneElement(r,u)}return i.Children.count(r)>1?i.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=i.forwardRef((e,r)=>{let{children:n,...l}=e;u(n)&&"function"==typeof s&&(n=s(n._payload));let a=i.Children.toArray(n),c=a.find(p);if(c){let e=c.props.children,n=a.map(t=>t!==c?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,o.jsx)(t,{...l,ref:r,children:i.isValidElement(e)?i.cloneElement(e,void 0,n):null})}return(0,o.jsx)(t,{...l,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var d=c("Slot"),f=Symbol("radix.slottable");function p(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}}},function(e){e.O(0,[650,392,971,23,744],function(){return e(e.s=8536)}),_N_E=e.O()}]);