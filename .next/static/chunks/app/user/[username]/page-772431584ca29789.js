(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[841],{741:function(e,s,t){Promise.resolve().then(t.bind(t,7173))},7173:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var r=t(7437),l=t(1704),o=t(9733),a=t(7992),n=t(9630),c=t(4504),i=t(2022),d=t(3765),x=t(3274),m=t(4453),u=t(933),f=t(2265),h=t(6463);let j=[{icon:c.Z,color:"text-foreground"},{icon:i.Z,color:"text-foreground"},{icon:d.Z,color:"text-accent"}];function p(){var e,s;let t=(0,h.useParams)(),c=(0,h.useRouter)(),{user:d}=(0,n.a)(),p=t.username,[b,g]=(0,f.useState)(null),[N,w]=(0,f.useState)(!0),[v,y]=(0,f.useState)(!1),[k,_]=(0,f.useState)(!1),[Z,E]=(0,f.useState)("posts"),F=(null==d?void 0:null===(e=d.user_metadata)||void 0===e?void 0:e.username)===p;(0,f.useEffect)(()=>{let e=async()=>{if(d)try{let e=await fetch("/api/users/".concat(p,"/follow"));if(e.ok){let s=await e.json();y(s.following)}}catch(e){console.error("Error checking follow status:",e)}};(async()=>{try{let e=await fetch("/api/users/".concat(p));if(e.ok){let s=await e.json();g(s.user)}else 404===e.status&&c.push("/404")}catch(e){console.error("Error fetching profile:",e)}finally{w(!1)}})(),e()},[p,d,c]);let C=async()=>{if(!d){c.push("/login");return}_(!0);try{let e=await fetch("/api/users/".concat(p,"/follow"),{method:"POST"});if(e.ok){let s=await e.json();y(s.following),b&&g({...b,followers_count:b.followers_count+(s.following?1:-1)})}}catch(e){console.error("Error following user:",e)}finally{_(!1)}};return N?(0,r.jsx)(l.A,{streak:7,children:(0,r.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,r.jsx)(x.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):b?(0,r.jsx)(l.A,{streak:7,children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"flex justify-center gap-3 mb-6",children:j.map((e,s)=>(0,r.jsx)("div",{className:"h-12 w-12 rounded-full border-2 border-border bg-background flex items-center justify-center",children:(0,r.jsx)(e.icon,{className:"h-5 w-5 ".concat(e.color)})},s))}),(0,r.jsxs)("div",{className:"flex flex-col items-center text-center mb-4",children:[(0,r.jsx)("div",{className:"h-24 w-24 rounded-full bg-muted flex items-center justify-center mb-3 overflow-hidden",children:b.avatar_url?(0,r.jsx)("img",{src:b.avatar_url,alt:b.name,className:"h-full w-full object-cover"}):(0,r.jsx)(i.Z,{className:"h-12 w-12"})}),(0,r.jsx)("h1",{className:"text-xl font-bold mb-1",children:b.name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mb-3",children:["@",b.username]}),b.bio&&(0,r.jsx)("p",{className:"text-sm mb-4 px-4",children:b.bio}),(null===(s=b.instruments)||void 0===s?void 0:s.length)>0&&(0,r.jsx)("div",{className:"flex gap-2 mb-4",children:b.instruments.map(e=>(0,r.jsx)("span",{className:"px-3 py-1 bg-secondary rounded-full text-xs font-medium capitalize",children:e},e))}),F?(0,r.jsx)(o.z,{variant:"outline",className:"w-full max-w-xs",onClick:()=>c.push("/profile"),children:"Edit Profile"}):(0,r.jsx)(o.z,{variant:v?"outline":"default",className:"w-full max-w-xs",onClick:C,disabled:k,children:k?(0,r.jsx)(x.Z,{className:"h-4 w-4 animate-spin"}):v?"Following":"Follow"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center py-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:"0"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mastered"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:b.followers_count}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Followers"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:b.following_count}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Following"})]})]})]}),b.is_private&&!v&&!F&&(0,r.jsxs)(a.bZ,{className:"mb-6 border-amber-200 bg-amber-50 dark:bg-amber-950 dark:border-amber-800",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 text-amber-600"}),(0,r.jsx)(a.X,{className:"text-amber-800 dark:text-amber-200 font-medium",children:"This account is private. Follow to see their posts and practice logs."})]}),(0,r.jsxs)("div",{className:"flex gap-6 mb-6 border-b border-border justify-center",children:[(0,r.jsx)("button",{className:"pb-3 text-sm font-medium transition-colors ".concat("posts"===Z?"text-foreground border-b-2 border-foreground":"text-muted-foreground"),onClick:()=>E("posts"),children:"Posts"}),(0,r.jsx)("button",{className:"pb-3 text-sm font-medium transition-colors ".concat("logs"===Z?"text-foreground border-b-2 border-foreground":"text-muted-foreground"),onClick:()=>E("logs"),children:"Logs"})]}),!b.is_private||v||F?(0,r.jsxs)(r.Fragment,{children:["posts"===Z&&(0,r.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,r.jsx)(u.Z,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"No posts yet"})]}),"logs"===Z&&(0,r.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,r.jsx)(u.Z,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"No practice logs yet"})]})]}):(0,r.jsxs)("div",{className:"text-center py-16 text-muted-foreground",children:[(0,r.jsx)(m.Z,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),(0,r.jsx)("h3",{className:"font-semibold text-lg mb-1",children:"This Account is Private"}),(0,r.jsx)("p",{className:"text-sm",children:"Follow this account to see their posts and practice logs."})]})]})}):(0,r.jsx)(l.A,{streak:7,children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,r.jsx)(i.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"User not found"}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["@",p," doesn't exist"]})]})})}}},function(e){e.O(0,[650,231,392,382,660,971,23,744],function(){return e(e.s=741)}),_N_E=e.O()}]);