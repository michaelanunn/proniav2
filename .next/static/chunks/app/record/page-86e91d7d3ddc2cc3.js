(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{5829:function(e,t,s){Promise.resolve().then(s.bind(s,6289))},933:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8094:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},6289:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var r=s(7437),a=s(1704),n=s(8185),i=s(9733),c=s(7209),l=s(4919),o=s(6986),d=s(4657),u=s(2465),m=s(933),x=s(8094),h=s(8030);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,h.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),g=(0,h.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var p=s(9333),b=s(4453);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,h.Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var v=s(2468),N=s(2265);function y(){let{isPremium:e,isTrialActive:t,trialDaysRemaining:s,hasUsedTrial:h,startTrial:y,openPaywall:w,isPaywallOpen:k,closePaywall:S,upgradeToPremium:D}=(0,d.g)(),{addSession:P,sessions:Z}=(0,u.r)(),[C,z]=(0,N.useState)(!1),[M,E]=(0,N.useState)(0),[T,R]=(0,N.useState)(!1),I=(0,N.useRef)(null),[F,_]=(0,N.useState)(!1),[O,U]=(0,N.useState)(!1),W=(0,N.useRef)(null),A=(0,N.useRef)([]),[B,H]=(0,N.useState)(!1),[J,L]=(0,N.useState)({piece:"",composer:"",notes:""}),q=e||t,G=e=>{let t=Math.floor(e/3600),s=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0")):"".concat(s.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))};(0,N.useEffect)(()=>(C&&!T?I.current=setInterval(()=>{E(e=>e+1)},1e3):I.current&&clearInterval(I.current),()=>{I.current&&clearInterval(I.current)}),[C,T]);let V=(0,N.useCallback)(async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});return U(!1),e.getTracks().forEach(e=>e.stop()),!0}catch(e){return U(!0),!1}},[]),K=async()=>{if(!q){w();return}if(await V())try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);W.current=t,A.current=[],t.ondataavailable=e=>{A.current.push(e.data)},t.start(),_(!0)}catch(e){console.error("Failed to start recording:",e)}},Q=()=>{W.current&&F&&(W.current.stop(),W.current.stream.getTracks().forEach(e=>e.stop()),_(!1))},X=Z.slice(0,5);return(0,r.jsxs)(a.A,{streak:7,showBranding:!0,children:[(0,r.jsx)(o.x,{isOpen:k,onClose:S,onStartTrial:()=>{y(),S()},onSubscribe:D,hasUsedTrial:h}),(0,r.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[t&&!e&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 text-orange-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-orange-800",children:["Trial: ",s," day",1!==s?"s":""," remaining"]})]}),(0,r.jsx)(i.z,{size:"sm",variant:"ghost",className:"text-orange-600 hover:text-orange-700 hover:bg-orange-100 h-7 text-xs",onClick:w,children:"Upgrade"})]})}),B?(0,r.jsxs)(n.Zb,{className:"p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:(0,r.jsx)(v.Z,{className:"h-8 w-8 text-green-600"})}),(0,r.jsx)("h2",{className:"text-xl font-bold mb-1",children:"Great Practice!"}),(0,r.jsx)("p",{className:"text-3xl font-mono font-bold text-accent",children:G(M)})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"What did you practice?"}),(0,r.jsx)(c.I,{placeholder:"e.g., Moonlight Sonata",value:J.piece,onChange:e=>L(t=>({...t,piece:e.target.value}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Composer (optional)"}),(0,r.jsx)(c.I,{placeholder:"e.g., Beethoven",value:J.composer,onChange:e=>L(t=>({...t,composer:e.target.value}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Notes (optional)"}),(0,r.jsx)(l.g,{placeholder:"How did the session go? Any breakthroughs?",value:J.notes,onChange:e=>L(t=>({...t,notes:e.target.value})),rows:3})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)(i.z,{variant:"outline",className:"flex-1",onClick:()=>{H(!1),E(0),L({piece:"",composer:"",notes:""})},children:"Discard"}),(0,r.jsxs)(i.z,{className:"flex-1",onClick:()=>{P({date:new Date().toISOString(),duration:M,piece:J.piece||void 0,composer:J.composer||void 0,notes:J.notes||void 0}),H(!1),E(0),L({piece:"",composer:"",notes:""})},children:[(0,r.jsx)(v.Z,{className:"mr-2 h-5 w-5"}),"Save Practice Log"]})]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.Zb,{className:"p-8 mb-6 text-center",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("p",{className:"text-6xl font-mono font-bold tracking-tight mb-2",children:G(M)}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:C?T?"Paused":"Practice in progress...":"Ready to practice"})]}),(0,r.jsx)("div",{className:"flex flex-col gap-3",children:C?(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(i.z,{size:"lg",variant:"outline",className:"flex-1 h-14",onClick:()=>{R(!T)},children:T?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{className:"mr-2 h-5 w-5"}),"Resume"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{className:"mr-2 h-5 w-5"}),"Pause"]})}),(0,r.jsxs)(i.z,{size:"lg",variant:"destructive",className:"flex-1 h-14",onClick:()=>{z(!1),R(!1),Q(),H(!0)},children:[(0,r.jsx)(g,{className:"mr-2 h-5 w-5"}),"End Practice"]})]}):(0,r.jsxs)(i.z,{size:"lg",className:"w-full h-14 text-lg font-semibold",onClick:()=>{z(!0),R(!1),E(0)},children:[(0,r.jsx)(x.Z,{className:"mr-2 h-5 w-5"}),"Start Practice"]})})]}),(0,r.jsxs)(n.Zb,{className:"p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full flex items-center justify-center ".concat(F?"bg-red-100":q?"bg-muted":"bg-gray-100"),children:F?(0,r.jsx)(p.Z,{className:"h-5 w-5 text-red-600 animate-pulse"}):q?(0,r.jsx)(p.Z,{className:"h-5 w-5"}):(0,r.jsx)(b.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Record Practice"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:q?"Capture audio of your session":"Premium feature"})]})]}),q?C?(0,r.jsx)(i.z,{size:"sm",variant:F?"destructive":"default",onClick:F?Q:K,disabled:O,children:F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j,{className:"mr-1 h-4 w-4"}),"Stop"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{className:"mr-1 h-4 w-4"}),"Record"]})}):(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"Start practice first"}):(0,r.jsx)(i.z,{size:"sm",className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white",onClick:w,children:h?"Upgrade":"Try Free"})]}),O&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:"Microphone access denied. Please enable it in your browser settings."})})]}),(0,r.jsxs)(n.Zb,{className:"p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Recent Practice Sessions"}),0===X.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)(m.Z,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"No practice sessions yet"}),(0,r.jsx)("p",{className:"text-xs mt-1",children:"Start practicing to see your history"})]}):(0,r.jsx)("div",{className:"space-y-3",children:X.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-muted rounded-lg",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-background flex items-center justify-center",children:(0,r.jsx)(m.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium truncate",children:e.piece||"Practice Session"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[new Date(e.date).toLocaleDateString()," â€¢ ",G(e.duration)]})]})]},e.id))})]})]})]})]})}},7209:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(7437),a=s(2265),n=s(9354);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},4919:function(e,t,s){"use strict";s.d(t,{g:function(){return i}});var r=s(7437),a=s(2265),n=s(9354);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});i.displayName="Textarea"},2465:function(e,t,s){"use strict";s.d(t,{c:function(){return c},r:function(){return l}});var r=s(7437),a=s(2265);let n=(0,a.createContext)(void 0),i="pronia_practice_sessions",c=e=>{let{children:t}=e,[s,c]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=localStorage.getItem(i);e&&c(JSON.parse(e))},[]),(0,a.useEffect)(()=>{localStorage.setItem(i,JSON.stringify(s))},[s]),(0,r.jsx)(n.Provider,{value:{sessions:s,addSession:e=>{let t={...e,id:Date.now().toString()};c(e=>[t,...e])},getTotalPracticeTime:()=>s.reduce((e,t)=>e+t.duration,0),getWeeklyPracticeTime:()=>{let e=new Date,t=new Date(e);return t.setDate(e.getDate()-e.getDay()),t.setHours(0,0,0,0),s.filter(e=>new Date(e.date)>=t).reduce((e,t)=>e+t.duration,0)},getWeeklyPracticeByDay:()=>{let e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=new Date,r=new Date(t);r.setDate(t.getDate()-t.getDay()),r.setHours(0,0,0,0);let a={};return e.forEach(e=>a[e]=0),s.filter(e=>new Date(e.date)>=r).forEach(t=>{let s=e[new Date(t.date).getDay()];a[s]+=t.duration/3600}),e.map(e=>({day:e,hours:Math.round(10*a[e])/10}))}},children:t})},l=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("usePractice must be used within a PracticeProvider");return e}}},function(e){e.O(0,[650,231,449,439,971,23,744],function(){return e(e.s=5829)}),_N_E=e.O()}]);